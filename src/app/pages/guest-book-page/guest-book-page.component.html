<div class="guest-book-container">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h1 class="text-center mb-5">Gästebuch & Bewertungen</h1>
        
        <!-- Lade-Indikator -->
        <div *ngIf="isLoading" class="loading-container text-center">
          <mat-spinner diameter="50" class="mx-auto mb-3"></mat-spinner>
          <p class="text-muted">Bewertungen werden geladen...</p>
        </div>

        <!-- Fehler-Anzeige -->
        <div *ngIf="hasError" class="error-container text-center">
          <mat-icon class="error-icon">error</mat-icon>
          <h3 class="text-danger mt-3">Fehler beim Laden</h3>
          <p class="text-muted mb-4">{{ errorMessage }}</p>
          <button mat-raised-button color="primary" (click)="retryLoad()">
            <mat-icon>refresh</mat-icon>
            Erneut versuchen
          </button>
        </div>

        <!-- Google Reviews Container -->
        <div id="googleReviews" style="display: none;"></div>

        <!-- Bewertungen Anzeige -->
        <div *ngIf="!isLoading && !hasError && reviews.length > 0" class="reviews-container">
          <div class="row">
            <div class="col-12">
              <h2 class="text-center mb-4">Was unsere Gäste sagen</h2>
            </div>
          </div>
          
          <div class="row">
            <div *ngFor="let review of reviews" class="col-lg-6 col-md-6 mb-4">
              <mat-card class="review-card h-100">
                <mat-card-header>
                  <div class="review-header">
                    <div class="reviewer-info">
                      <h5 class="reviewer-name">{{ review.author_name }}</h5>
                      <div class="rating-stars">
                        <mat-icon *ngFor="let star of createRange(+review.rating)" class="star-filled">star</mat-icon>
                        <mat-icon *ngFor="let star of createRange(5 - +review.rating)" class="star-empty">star_border</mat-icon>
                      </div>
                    </div>
                    <div class="review-date">
                      {{ review.relative_time_description }}
                    </div>
                  </div>
                </mat-card-header>
                
                <mat-card-content>
                  <p class="review-text">{{ review.text }}</p>
                </mat-card-content>
              </mat-card>
            </div>
          </div>
          
          <!-- Alle Reviews Button -->
          <div class="row mt-4">
            <div class="col-12 text-center">
              <button mat-raised-button color="primary" class="all-reviews-btn" (click)="openAllReviews()">
                <mat-icon>open_in_new</mat-icon>
                Alle Reviews anzeigen
              </button>
            </div>
          </div>
        </div>

        <!-- Keine Bewertungen -->
        <div *ngIf="!isLoading && !hasError && reviews.length === 0" class="text-center">
          <mat-icon class="no-reviews-icon">rate_review</mat-icon>
          <h3 class="mt-3">Noch keine Bewertungen</h3>
          <p class="text-muted">Seien Sie der Erste, der eine Bewertung hinterlässt!</p>
        </div>
      </div>
    </div>
  </div>
</div>
